<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="POWERFORM">
    <meta name="theme-color" content="#0a0a0a">
    <title>POWERFORM - Workout Tracker</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' fill='%230a0a0a'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black' font-size='280' font-weight='bold' fill='%2300fff2'%3EP%3C/text%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Antonio:wght@400;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --electric-cyan: #00fff2;
            --neon-pink: #ff006e;
            --deep-black: #0a0a0a;
            --dark-gray: #1a1a1a;
            --mid-gray: #2a2a2a;
            --lime-accent: #ccff00;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Mono', monospace;
            background: linear-gradient(135deg, var(--deep-black) 0%, #1a0a1a 50%, var(--deep-black) 100%);
            color: var(--white);
            min-height: 100vh;
            overflow-x: hidden;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
        }

        /* Animated background grid */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 242, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 242, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(3rem, 8vw, 7rem);
            letter-spacing: 0.15em;
            background: linear-gradient(135deg, var(--electric-cyan), var(--neon-pink), var(--lime-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 80px rgba(0, 255, 242, 0.5);
            animation: glow 3s ease-in-out infinite alternate;
            margin-bottom: 10px;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 20px rgba(0, 255, 242, 0.5)); }
            to { filter: drop-shadow(0 0 40px rgba(255, 0, 110, 0.8)); }
        }

        .tagline {
            font-family: 'Antonio', sans-serif;
            font-size: 1.2rem;
            letter-spacing: 0.3em;
            color: var(--electric-cyan);
            text-transform: uppercase;
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--dark-gray), var(--mid-gray));
            border: 2px solid var(--electric-cyan);
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 242, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            border-color: var(--neon-pink);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 0, 110, 0.3);
        }

        .stat-value {
            font-family: 'Antonio', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--lime-accent);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--electric-cyan);
            text-transform: uppercase;
            letter-spacing: 0.2em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 968px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: var(--dark-gray);
            border: 2px solid var(--electric-cyan);
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .panel::after {
            content: '';
            position: absolute;
            top: -2px;
            right: -2px;
            width: 40px;
            height: 40px;
            background: var(--neon-pink);
            clip-path: polygon(100% 0, 0 0, 100% 100%);
        }

        .panel-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            letter-spacing: 0.1em;
            color: var(--electric-cyan);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--neon-pink);
            padding-bottom: 10px;
        }

        .workout-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            font-family: 'Antonio', sans-serif;
            background: var(--mid-gray);
            color: var(--white);
            border: 2px solid var(--electric-cyan);
            padding: 12px 24px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .tab-btn:hover {
            background: var(--electric-cyan);
            color: var(--deep-black);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: var(--neon-pink);
            border-color: var(--neon-pink);
            color: var(--white);
        }

        .exercise-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .exercise-item {
            background: var(--mid-gray);
            border-left: 4px solid var(--lime-accent);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .exercise-item:hover {
            border-left-color: var(--neon-pink);
            transform: translateX(10px);
            background: var(--dark-gray);
        }

        .exercise-info h3 {
            font-family: 'Antonio', sans-serif;
            font-size: 1.3rem;
            color: var(--white);
            margin-bottom: 5px;
        }

        .exercise-details {
            font-size: 0.85rem;
            color: var(--electric-cyan);
        }

        .btn {
            font-family: 'Antonio', sans-serif;
            background: linear-gradient(135deg, var(--neon-pink), var(--electric-cyan));
            color: var(--white);
            border: none;
            padding: 16px 30px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 700;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 48px;
            touch-action: manipulation;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 242, 0.6);
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .timer-display {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 5rem;
            text-align: center;
            color: var(--lime-accent);
            margin: 30px 0;
            text-shadow: 0 0 20px rgba(204, 255, 0, 0.5);
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        input[type="text"],
        input[type="number"],
        select {
            background: var(--mid-gray);
            border: 2px solid var(--electric-cyan);
            color: var(--white);
            padding: 14px;
            font-family: 'Space Mono', monospace;
            width: 100%;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
            font-size: 16px;
            min-height: 48px;
            -webkit-appearance: none;
            appearance: none;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--neon-pink);
            box-shadow: 0 0 10px rgba(255, 0, 110, 0.3);
        }

        .add-exercise-form {
            display: grid;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--mid-gray);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .history-item {
            background: var(--mid-gray);
            border-left: 4px solid var(--electric-cyan);
            padding: 15px;
            margin-bottom: 10px;
            animation: slideIn 0.5s ease;
        }

        .history-date {
            font-family: 'Antonio', sans-serif;
            color: var(--lime-accent);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .history-exercises {
            font-size: 0.85rem;
            color: var(--white);
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: var(--mid-gray);
            border: 2px solid var(--electric-cyan);
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-pink), var(--lime-accent));
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .delete-btn {
            background: transparent;
            border: 2px solid var(--neon-pink);
            color: var(--neon-pink);
            padding: 8px 16px;
            cursor: pointer;
            font-family: 'Antonio', sans-serif;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: var(--neon-pink);
            color: var(--white);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--electric-cyan);
            font-style: italic;
        }

        .volume-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: var(--mid-gray);
            border-left: 4px solid var(--lime-accent);
            transition: all 0.3s ease;
        }

        .volume-item:hover {
            transform: translateX(5px);
            border-left-color: var(--neon-pink);
        }

        .volume-label {
            font-family: 'Antonio', sans-serif;
            font-size: 1.3rem;
            color: var(--white);
            text-transform: uppercase;
        }

        .volume-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            color: var(--lime-accent);
        }

        .volume-bar-container {
            width: 100%;
            height: 8px;
            background: var(--dark-gray);
            margin-top: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .volume-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--electric-cyan), var(--neon-pink));
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>POWERFORM</h1>
            <div class="tagline">Track. Train. Transform.</div>
        </header>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="totalWorkouts">0</div>
                <div class="stat-label">Workouts</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalExercises">0</div>
                <div class="stat-label">Exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="currentStreak">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="weeklyGoal">0%</div>
                <div class="stat-label">Weekly Goal</div>
            </div>
        </div>

        <div class="main-grid">
            <div class="panel">
                <h2 class="panel-title">Today's Workout</h2>
                
                <div class="workout-tabs">
                    <button class="tab-btn active" onclick="switchWorkout('push')">Push</button>
                    <button class="tab-btn" onclick="switchWorkout('pull')">Pull</button>
                    <button class="tab-btn" onclick="switchWorkout('legs')">Legs</button>
                    <button class="tab-btn" onclick="switchWorkout('custom')">Custom</button>
                </div>

                <div id="exerciseList" class="exercise-list"></div>

                <div class="add-exercise-form" id="customForm" style="display: none;">
                    <input type="text" id="exerciseName" placeholder="Exercise Name">
                    <div class="form-row">
                        <input type="number" id="exerciseSets" placeholder="Sets" min="1">
                        <input type="number" id="exerciseReps" placeholder="Reps" min="1">
                    </div>
                    <input type="number" id="exerciseWeight" placeholder="Weight (lbs)" min="0" step="5">
                    <select id="exerciseBodyPart">
                        <option value="">Select Body Part</option>
                        <option value="chest">Chest</option>
                        <option value="back">Back</option>
                        <option value="shoulders">Shoulders</option>
                        <option value="arms">Arms</option>
                        <option value="legs">Legs</option>
                        <option value="core">Core</option>
                    </select>
                    <button class="btn" onclick="addCustomExercise()"><span>+ Add Exercise</span></button>
                </div>

                <button class="btn" onclick="completeWorkout()" style="margin-top: 20px; width: 100%;"><span>Complete Workout</span></button>
            </div>

            <div class="panel">
                <h2 class="panel-title">Rest Timer</h2>
                
                <div class="timer-display" id="timerDisplay">00:00</div>
                
                <div class="timer-controls">
                    <button class="btn" onclick="setTimer(30)"><span>30s</span></button>
                    <button class="btn" onclick="setTimer(60)"><span>1min</span></button>
                    <button class="btn" onclick="setTimer(90)"><span>90s</span></button>
                    <button class="btn" onclick="setTimer(120)"><span>2min</span></button>
                </div>
                
                <div class="timer-controls" style="margin-top: 15px;">
                    <button class="btn" onclick="startTimer()"><span>Start</span></button>
                    <button class="btn" onclick="pauseTimer()"><span>Pause</span></button>
                    <button class="btn" onclick="resetTimer()"><span>Reset</span></button>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="timerProgress" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2 class="panel-title">Workout History</h2>
            <div id="workoutHistory"></div>
        </div>

        <div class="panel">
            <h2 class="panel-title">Volume by Body Part</h2>
            <div id="volumeBreakdown"></div>
        </div>
    </div>

    <script>
        // Workout Templates
        const workoutTemplates = {
            push: [
                { name: 'Bench Press', sets: 4, reps: 8, weight: 0, bodyPart: 'chest' },
                { name: 'Overhead Press', sets: 3, reps: 10, weight: 0, bodyPart: 'shoulders' },
                { name: 'Incline Dumbbell Press', sets: 3, reps: 12, weight: 0, bodyPart: 'chest' },
                { name: 'Tricep Dips', sets: 3, reps: 12, weight: 0, bodyPart: 'arms' },
                { name: 'Lateral Raises', sets: 3, reps: 15, weight: 0, bodyPart: 'shoulders' }
            ],
            pull: [
                { name: 'Pull-ups', sets: 4, reps: 8, weight: 0, bodyPart: 'back' },
                { name: 'Barbell Rows', sets: 4, reps: 10, weight: 0, bodyPart: 'back' },
                { name: 'Lat Pulldown', sets: 3, reps: 12, weight: 0, bodyPart: 'back' },
                { name: 'Face Pulls', sets: 3, reps: 15, weight: 0, bodyPart: 'shoulders' },
                { name: 'Bicep Curls', sets: 3, reps: 12, weight: 0, bodyPart: 'arms' }
            ],
            legs: [
                { name: 'Squats', sets: 4, reps: 8, weight: 0, bodyPart: 'legs' },
                { name: 'Romanian Deadlifts', sets: 3, reps: 10, weight: 0, bodyPart: 'legs' },
                { name: 'Leg Press', sets: 3, reps: 12, weight: 0, bodyPart: 'legs' },
                { name: 'Leg Curls', sets: 3, reps: 12, weight: 0, bodyPart: 'legs' },
                { name: 'Calf Raises', sets: 4, reps: 15, weight: 0, bodyPart: 'legs' }
            ],
            custom: []
        };

        let currentWorkout = 'push';
        let customExercises = [];
        let timerInterval = null;
        let timerSeconds = 0;
        let timerTotalSeconds = 0;
        let workoutHistory = JSON.parse(localStorage.getItem('workoutHistory')) || [];

        // Initialize
        function init() {
            displayExercises();
            displayHistory();
            updateStats();
        }

        // Switch workout type
        function switchWorkout(type) {
            currentWorkout = type;
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Show/hide custom form
            document.getElementById('customForm').style.display = type === 'custom' ? 'block' : 'none';
            
            displayExercises();
        }

        // Display exercises
        function displayExercises() {
            const list = document.getElementById('exerciseList');
            const exercises = currentWorkout === 'custom' ? customExercises : workoutTemplates[currentWorkout];
            
            if (exercises.length === 0) {
                list.innerHTML = '<div class="empty-state">No exercises added yet. Add your first exercise below!</div>';
                return;
            }

            list.innerHTML = exercises.map((ex, index) => {
                const volume = (ex.weight || 0) * ex.sets * ex.reps;
                return `
                <div class="exercise-item">
                    <div class="exercise-info">
                        <h3>${ex.name}</h3>
                        <div class="exercise-details">
                            ${ex.sets} sets Ã— ${ex.reps} reps
                            ${ex.bodyPart ? ` â€¢ ${ex.bodyPart.toUpperCase()}` : ''}
                        </div>
                        <div style="margin-top: 8px;">
                            <input 
                                type="number" 
                                value="${ex.weight || 0}" 
                                onchange="updateWeight('${currentWorkout}', ${index}, this.value)"
                                placeholder="Weight (lbs)"
                                min="0"
                                step="5"
                                style="width: 120px; padding: 6px; margin-right: 10px;"
                            >
                            <span style="color: var(--lime-accent); font-weight: bold;">
                                Volume: ${volume.toLocaleString()} lbs
                            </span>
                        </div>
                    </div>
                    ${currentWorkout === 'custom' ? `<button class="delete-btn" onclick="deleteExercise(${index})">Delete</button>` : ''}
                </div>
            `;
            }).join('');
        }

        // Add custom exercise
        function addCustomExercise() {
            const name = document.getElementById('exerciseName').value;
            const sets = parseInt(document.getElementById('exerciseSets').value);
            const reps = parseInt(document.getElementById('exerciseReps').value);
            const weight = parseInt(document.getElementById('exerciseWeight').value) || 0;
            const bodyPart = document.getElementById('exerciseBodyPart').value;

            if (name && sets && reps && bodyPart) {
                customExercises.push({ name, sets, reps, weight, bodyPart });
                displayExercises();
                
                // Clear form
                document.getElementById('exerciseName').value = '';
                document.getElementById('exerciseSets').value = '';
                document.getElementById('exerciseReps').value = '';
                document.getElementById('exerciseWeight').value = '';
                document.getElementById('exerciseBodyPart').value = '';
            } else {
                alert('Please fill in all fields including body part!');
            }
        }

        // Update weight for an exercise
        function updateWeight(workoutType, index, weight) {
            const exercises = workoutType === 'custom' ? customExercises : workoutTemplates[workoutType];
            exercises[index].weight = parseFloat(weight) || 0;
            displayExercises();
        }

        // Delete exercise
        function deleteExercise(index) {
            customExercises.splice(index, 1);
            displayExercises();
        }

        // Complete workout
        function completeWorkout() {
            const exercises = currentWorkout === 'custom' ? customExercises : workoutTemplates[currentWorkout];
            
            if (exercises.length === 0) {
                alert('Add some exercises first!');
                return;
            }

            const workout = {
                date: new Date().toISOString(),
                type: currentWorkout,
                exercises: exercises
            };

            workoutHistory.unshift(workout);
            localStorage.setItem('workoutHistory', JSON.stringify(workoutHistory));
            
            displayHistory();
            updateStats();
            
            alert('ðŸ”¥ Workout completed! Great job!');
        }

        // Display workout history
        function displayHistory() {
            const container = document.getElementById('workoutHistory');
            
            if (workoutHistory.length === 0) {
                container.innerHTML = '<div class="empty-state">No workouts recorded yet. Complete your first workout!</div>';
                return;
            }

            container.innerHTML = workoutHistory.slice(0, 10).map(workout => {
                const date = new Date(workout.date);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });

                const totalVolume = workout.exercises.reduce((sum, ex) => {
                    return sum + ((ex.weight || 0) * ex.sets * ex.reps);
                }, 0);

                return `
                    <div class="history-item">
                        <div class="history-date">${formattedDate}</div>
                        <div class="history-exercises">
                            ${workout.type.toUpperCase()} - ${workout.exercises.length} exercises - ${totalVolume.toLocaleString()} lbs total volume
                        </div>
                    </div>
                `;
            }).join('');

            displayVolumeBreakdown();
        }

        // Calculate and display volume by body part
        function displayVolumeBreakdown() {
            const container = document.getElementById('volumeBreakdown');
            const volumeByBodyPart = {};

            // Calculate volume from all workouts
            workoutHistory.forEach(workout => {
                workout.exercises.forEach(ex => {
                    if (ex.bodyPart) {
                        const volume = (ex.weight || 0) * ex.sets * ex.reps;
                        if (!volumeByBodyPart[ex.bodyPart]) {
                            volumeByBodyPart[ex.bodyPart] = 0;
                        }
                        volumeByBodyPart[ex.bodyPart] += volume;
                    }
                });
            });

            // Sort by volume
            const sortedBodyParts = Object.entries(volumeByBodyPart)
                .sort((a, b) => b[1] - a[1]);

            if (sortedBodyParts.length === 0) {
                container.innerHTML = '<div class="empty-state">Complete workouts with weight tracking to see volume breakdown!</div>';
                return;
            }

            const maxVolume = sortedBodyParts[0][1];

            container.innerHTML = sortedBodyParts.map(([bodyPart, volume]) => {
                const percentage = (volume / maxVolume) * 100;
                return `
                    <div class="volume-item">
                        <div>
                            <div class="volume-label">${bodyPart}</div>
                            <div class="volume-bar-container">
                                <div class="volume-bar-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <div class="volume-value">${volume.toLocaleString()}<span style="font-size: 1rem; color: var(--electric-cyan);"> lbs</span></div>
                    </div>
                `;
            }).join('');
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalWorkouts').textContent = workoutHistory.length;
            
            const totalExercises = workoutHistory.reduce((sum, w) => sum + w.exercises.length, 0);
            document.getElementById('totalExercises').textContent = totalExercises;

            // Calculate streak
            let streak = 0;
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            for (let i = 0; i < workoutHistory.length; i++) {
                const workoutDate = new Date(workoutHistory[i].date);
                workoutDate.setHours(0, 0, 0, 0);
                
                const daysDiff = Math.floor((today - workoutDate) / (1000 * 60 * 60 * 24));
                
                if (daysDiff === streak) {
                    streak++;
                } else {
                    break;
                }
            }
            document.getElementById('currentStreak').textContent = streak;

            // Weekly goal (3 workouts per week)
            const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
            const weekWorkouts = workoutHistory.filter(w => new Date(w.date) >= weekAgo).length;
            const weeklyGoal = Math.min(100, Math.round((weekWorkouts / 3) * 100));
            document.getElementById('weeklyGoal').textContent = weeklyGoal + '%';
        }

        // Timer functions
        function setTimer(seconds) {
            timerSeconds = seconds;
            timerTotalSeconds = seconds;
            updateTimerDisplay();
            document.getElementById('timerProgress').style.width = '100%';
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (timerSeconds === 0) {
                setTimer(60); // Default 1 minute
            }
            
            if (timerInterval) return;
            
            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                
                const progress = (timerSeconds / timerTotalSeconds) * 100;
                document.getElementById('timerProgress').style.width = progress + '%';
                
                if (timerSeconds <= 0) {
                    pauseTimer();
                    alert('â° Rest period complete! Time to go again!');
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = timerTotalSeconds;
            updateTimerDisplay();
            document.getElementById('timerProgress').style.width = '100%';
        }

        // Initialize on load
        init();

        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => console.log('SW registered:', registration))
                    .catch(error => console.log('SW registration failed:', error));
            });
        }
    </script>
</body>
</html>